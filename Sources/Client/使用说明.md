# Show Me The Money Reborn 4.0.0 - 使用说明

## 🎯 核心功能

### ✅ 已实现功能

1. **按 Ctrl 键显示价格** ⭐新功能
   - 默认情况下，鼠标悬停物品**不显示**价格
   - **按住 Ctrl 键**（左Ctrl 或右Ctrl）并将鼠标悬停在物品上，才会显示价格
   - 松开 Ctrl 键后，价格消失

2. **跳蚤市场价格显示**
   - 显示物品在跳蚤市场的价格
   - 自动从服务端获取 4054+ 个物品价格
   - 5分钟价格缓存，减少服务器负担

3. **单格价值计算**
   - 自动计算每格价值（总价 / 格子数）
   - 帮助快速判断物品性价比

4. **六级颜色编码系统**
   - ⚪ 白色：≤ ₽3,000（垃圾物品）
   - 🟢 绿色：≤ ₽10,000（普通物品）
   - 🔵 蓝色：≤ ₽20,000（良好物品）
   - 🟣 紫色：≤ ₽50,000（稀有物品）
   - 🟠 橙色：≤ ₽100,000（史诗物品）
   - 🔴 红色：≥ ₽100,000（传说物品）

5. **中文配置界面**
   - F12 打开配置管理器
   - 所有配置项显示中文
   - 实时生效

---

## 🎮 使用方法

### 基本操作

1. **启动游戏**
   - 确保 SPT 服务端已启动
   - 启动游戏客户端

2. **查看物品价格**
   ```
   步骤：
   1. 打开库存界面（Tab 键）
   2. **按住 Ctrl 键**
   3. 将鼠标悬停在物品上
   4. 查看价格信息
   ```

3. **期望显示效果**
   ```
   [物品名称]
   [物品描述]

   跳蚤市场: ₽45,000  ← 总价（带颜色，粗体）
   单格: ₽2,250       ← 单格价格
   ```

---

## ⚙️ 配置选项

### 如何打开配置

1. 进入游戏主菜单
2. 按 **F12** 键
3. 找到 **"Show Me The Money Reborn"**
4. 展开配置项

### 配置选项说明

#### **1. 主要设置**

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| **启用插件** | ✅ 是 | 总开关，关闭后插件不工作 |
| **显示跳蚤市场价格** | ✅ 是 | 是否显示跳蚤价格 |
| **显示每格价格** | ✅ 是 | 是否显示单格价值 |
| **提示框延迟（秒）** | 0.0 | Ctrl+悬停后延迟时间（0-2秒） |

#### **2. 显示设置**

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| **启用颜色编码** | ✅ 是 | 根据价格给价格文本着色 |
| **最佳价格加粗** | ✅ 是 | 用粗体突出最高价格 |

#### **3. 性能设置**

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| **价格缓存时间（秒）** | 300 | 价格缓存时长（60-600秒） |
| **使用动态价格** | ✅ 是 | 使用跳蚤实时价格（更准确） |

---

## 💡 使用技巧

### 快速识别高价值物品

1. **按住 Ctrl 键**
2. **快速扫过物品**
3. **关注颜色**：
   - 看到 🟠橙色 或 🔴红色 = 高价值物品
   - 看到 ⚪白色 = 垃圾，可以丢弃

### 计算性价比

```
例子：
物品A: ₽50,000，占 10 格 → 单格 ₽5,000
物品B: ₽30,000，占 4 格  → 单格 ₽7,500

结论：物品B 性价比更高！
```

### 优化藏身处

- 按住 Ctrl 扫描藏身处
- 找出低价值物品
- 优先卖出/丢弃低价值物品
- 为高价值物品腾出空间

---

## 🔧 常见问题

### ❓ 按 Ctrl 键没有显示价格？

**检查**：
1. 确认配置中 "启用插件" 已勾选
2. 确认 "显示跳蚤市场价格" 已勾选
3. 查看日志 `BepInEx/LogOutput.log`
4. 确认看到 "价格数据初始化成功 (xxxx 个物品)"

### ❓ 价格显示不准确？

**解决方案**：
1. 按 F12 打开配置
2. 找到 "使用动态价格"
3. 确认已勾选
4. 重启游戏

### ❓ 显示 "价格暂不可用"？

**原因**：
- 服务端模组未安装或未启动
- 网络连接问题

**解决**：
1. 确认服务端已启动
2. 确认服务端模组 `swiftxp-showmethemoney` 已安装
3. 查看服务端日志

### ❓ 影响游戏性能吗？

**不会**：
- 5分钟价格缓存，减少网络请求
- 只在按 Ctrl 键时工作
- 轻量级实现，内存占用 < 10MB

---

## 📊 技术信息

| 项目 | 信息 |
|------|------|
| **版本号** | 4.0.0 |
| **DLL 名称** | ShowMeTheMoney.Reborn.dll |
| **插件 ID** | com.swiftxp.showmethemoney.reborn |
| **依赖** | SPT 4.0.0 / EFT 0.16.9.0.40087 |
| **服务端模组** | swiftxp-showmethemoney (必需) |

### 与旧版本的区别

| 功能 | 旧版本 | Reborn 4.0.0 |
|------|--------|--------------|
| **触发方式** | 自动显示 | **按 Ctrl 键** |
| **价格来源** | 交易商+跳蚤 | 仅跳蚤市场 |
| **配置界面** | 英文 | **中文** |
| **颜色系统** | 可配置 | **固定6级** |
| **SPT 版本** | 3.x | **4.0.0** |

---

## 📝 更新日志

### v4.0.0 (2025-10-16)

✅ **新功能**
- 实现按 Ctrl 键才显示价格
- 中文配置界面
- 固定六级颜色编码系统
- HTTP 价格数据服务
- 5分钟价格缓存

✅ **优化**
- 完全重写，代码更清晰
- 性能优化，内存占用更低
- 错误处理更健壮

❌ **移除功能**
- 交易商价格（SPT 4.0 API 不兼容）
- 武器配件价格
- 跳蚤税费计算

---

## 🤝 反馈和支持

### 报告问题

如果遇到问题，请提供：
1. `BepInEx/LogOutput.log` 文件
2. 问题的详细描述
3. 复现步骤
4. 截图（如果可能）

### 服务端日志位置

```
SPT 服务端目录/user/logs/
```

查找包含 "showMeTheMoney" 的日志

---

## 📜 许可证

MIT License

---

**祝你游戏愉快！** 🎮✨
